<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="acutelines.datatoolbox">
<title>SOFA score calculation • Acutelines Datatoolbox</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SOFA score calculation">
<meta property="og:description" content="acutelines.datatoolbox">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Acutelines Datatoolbox</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/SOFA-score.html">SOFA score calculation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/UMCG-SEH/acutelines.datatoolbox/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>SOFA score calculation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/UMCG-SEH/acutelines.datatoolbox/blob/HEAD/vignettes/SOFA-score.Rmd" class="external-link"><code>vignettes/SOFA-score.Rmd</code></a></small>
      <div class="d-none name"><code>SOFA-score.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Asuming the data is loaded into a dataframe <code>df</code>, the SOFA
score can be calculated in two different ways.</p>
<div class="section level3">
<h3 id="automatic-calculation">Automatic calculation<a class="anchor" aria-label="anchor" href="#automatic-calculation"></a>
</h3>
<p>Use the <code><a href="../reference/sofa_magic_wrapper.html">sofa_magic_wrapper()</a></code> function when you use a raw
data file from the Acutelines database. SOFA related variables are coded
as <code>SOFA_[timespan]h_[variable]</code>. Make sure all variables are
present. <code>interval</code> can be used to set the time stap interval
in correspondance to your dataset, while <code>timespan</code> can be
use to set the maximum timespan.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sofa_magic_wrapper.html">sofa_magic_wrapper</a></span><span class="op">(</span><span class="va">df</span>, interval<span class="op">=</span><span class="fl">24</span>, timespan<span class="op">=</span><span class="fl">72</span><span class="op">)</span></span></code></pre></div>
<details><summary>
Manual calculation
</summary><p>When your dataset has a different naming schema (not having the
<code>SOFA_[timespan]h_[variable]</code> format), you can still
calculate the SOFA score with this package, however, you have to provide
the package with a mapping of each column in your dataset corresponding
to the acutal element of the SOFA score.</p>
<p>First define the mapping:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">column_mapping</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  PaO2 <span class="op">=</span> <span class="st">"your_PaO2_variable"</span>,</span>
<span>  SpO2 <span class="op">=</span> <span class="st">"your_SpO2_variable"</span>,</span>
<span>  FiO2 <span class="op">=</span> <span class="st">"your_FiO2_variable"</span>,</span>
<span>  oxygen_supply <span class="op">=</span> <span class="st">"your_oxygen_supply_variable"</span>,</span>
<span>  oxygen_mode <span class="op">=</span> <span class="st">"your_oxygen_mode_variable"</span>,</span>
<span>  platelets <span class="op">=</span> <span class="st">"your_platelets_variable"</span>,</span>
<span>  bilirubin <span class="op">=</span> <span class="st">"your_bilirubin_variable"</span>,</span>
<span>  MAP <span class="op">=</span> <span class="st">"your_MAP_variable"</span>,</span>
<span>  dopamine <span class="op">=</span> <span class="st">"your_dopamine_variable"</span>,</span>
<span>  dobutamine <span class="op">=</span> <span class="st">"your_dobutamine_variable"</span>,</span>
<span>  epinephrine <span class="op">=</span> <span class="st">"your_epinephrine_variable"</span>,</span>
<span>  norepinephrine <span class="op">=</span> <span class="st">"your_norepineprhine_variable"</span>,</span>
<span>  norepinephrine_amp <span class="op">=</span> <span class="st">"your_norepinephrine_amp_variable"</span>,</span>
<span>  GCS <span class="op">=</span> <span class="st">"your_GCS_variable"</span>,</span>
<span>  creatinine <span class="op">=</span> <span class="st">"your_creatinine_variable"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then pass that mapping to the sofa_total function along with your
dataframe:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sofa_total.html">sofa_total</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">column_mapping</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
</div>
<div class="section level2">
<h2 id="calculations">Calculations<a class="anchor" aria-label="anchor" href="#calculations"></a>
</h2>
<p>The SOFA (Sequential Organ Failure Assessment)<span class="citation"><sup><a href="#ref-Lambden2019">1</a>,<a href="#ref-Moreno2023">2</a></sup></span> calculation functions are
designed to provide the worst SOFA score for a patient within a specific
interval. When retrospectively calculating the SOFA score, one must
address missing values and inaccurately recorded values. This function
automatically handles such issues. Consequently, the SOFA score
functions incorporate several assumptions to ensure feasible
calculations. Users should be aware of these assumptions when utilizing
these functions.</p>
<div class="section level3">
<h3 id="respiration">Respiration<a class="anchor" aria-label="anchor" href="#respiration"></a>
</h3>
<p>Many respiratory parameters tend to be missing. The
<code><a href="../reference/sofa_respiration.html">sofa_respiration()</a></code> function calculated the respiratory
points of the SOFA score with the following rules and assumptions:</p>
<ol style="list-style-type: decimal">
<li>If PaO2 is below 7 it is assumed venous and removed from the
dataset.</li>
<li>If PaO2 is missing, it is imputed from SpO2 using the Brows / Ellis
equation<span class="citation"><sup><a href="#ref-BROWN2016307">3</a>,<a href="#ref-severinghaus1979">4</a></sup></span>. Rounded by 1
decimal.</li>
<li>If FiO2 is missing it is imputed from nasal canula oxygen supply
using formula: <span class="math inline">\(FiO_2 = 20+4Q_{O_2}\)</span>,
where Q<sub>O2</sub> is the oxygen flow in L/min.
<ul>
<li>If the FiO2 is below 1, it is assumed a fraction and multiplied by
100 to make it a percentage.<br>
</li>
<li>If the FiO2 is between 1 ans 21 is is assumed oxygen supply (L/min)
and converted to FiO2.</li>
<li>In case nasal canula oxygen supply is below or equaol to 15 L/min it
is assumed to be FiO2.</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="coagulation">Coagulation<a class="anchor" aria-label="anchor" href="#coagulation"></a>
</h3>
</div>
<div class="section level3">
<h3 id="cardiovascular">Cardiovascular<a class="anchor" aria-label="anchor" href="#cardiovascular"></a>
</h3>
</div>
<div class="section level3">
<h3 id="central-nervous-system">Central nervous system<a class="anchor" aria-label="anchor" href="#central-nervous-system"></a>
</h3>
</div>
<div class="section level3 unnumbered">
<h3 class="unnumbered" id="renal">Renal<a class="anchor" aria-label="anchor" href="#renal"></a>
</h3>
<div id="refs" class="references csl-bib-body">
<div id="ref-Lambden2019" class="csl-entry">
<div class="csl-left-margin">1. </div>
<div class="csl-right-inline">Lambden S, Laterre PF, Levy MM, Francois B. The
SOFA score—development, utility and challenges of accurate assessment in
clinical trials. <em>Critical Care</em>. 2019;23(1):374. doi:<a href="https://doi.org/10.1186/s13054-019-2663-7" class="external-link">10.1186/s13054-019-2663-7</a>
</div>
</div>
<div id="ref-Moreno2023" class="csl-entry">
<div class="csl-left-margin">2. </div>
<div class="csl-right-inline">Moreno R, Rhodes A, Piquilloud L, et al. The
sequential organ failure assessment (SOFA) score: Has the time come for
an update? <em>Critical Care</em>. 2023;27(1):15. doi:<a href="https://doi.org/10.1186/s13054-022-04290-9" class="external-link">10.1186/s13054-022-04290-9</a>
</div>
</div>
<div id="ref-BROWN2016307" class="csl-entry">
<div class="csl-left-margin">3. </div>
<div class="csl-right-inline">Brown SM, Grissom CK, Moss M, et al. Nonlinear
imputation of Pao2/Fio2 from Spo2/Fio2 among patients with acute
respiratory distress syndrome. <em>CHEST</em>. 2016;150(2):307-313.
doi:<a href="https://doi.org/10.1016/j.chest.2016.01.003" class="external-link">https://doi.org/10.1016/j.chest.2016.01.003</a>
</div>
</div>
<div id="ref-severinghaus1979" class="csl-entry">
<div class="csl-left-margin">4. </div>
<div class="csl-right-inline">Severinghaus JW. Simple, accurate equations for
human blood O2 dissociation computations. <em>Journal of Applied
Physiology</em>. 1979;46(3):599-602. doi:<a href="https://doi.org/10.1152/jappl.1979.46.3.599" class="external-link">10.1152/jappl.1979.46.3.599</a>
</div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Raymond J. van Wijk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
